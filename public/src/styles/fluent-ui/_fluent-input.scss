@keyframes fluent-input-stroke-animation {
    0% {
        width: var(--fluent-input-stroke-start-size);
        opacity: 0;
    }
    100% {
        width: calc(100% - var(--fluent-input-stroke-size) * 2);
        opacity: 1;
    }
}

:host {
    width: auto;
    height: auto;
    min-height: calc(8 * var(--design-unit) * 1px);
    position: relative;
    box-sizing: border-box;
    outline: none;
    font-family: var(--default-font-family);
    font-size: var(--base-font-size);
    border-radius: var(--border-radius);
    display: inline-flex;
    user-select: none;

    > div[part=control] {
        width: 100%;
        display: contents;
        border-radius: inherit;

        > span[part=content] {
            width: 100%;
            height: 100%;
            display: block;
            position: relative;
            content: "";
            border-radius: inherit;

            > input[part=input] {
                width: 100%;
                height: auto;
                min-height: var(--fluent-input-min-height);
                background: padding-box linear-gradient(var(--control-background-color), var(--control-background-color)), border-box linear-gradient(var(--control-primary-border-color), var(--control-secondary-border-color));
                border: 1px solid transparent;
                box-sizing: border-box;
                display: inline-flex;
                justify-content: center;
                line-height: 34px;
                align-items: center;
                padding: var(--fluent-input-padding);
                white-space: nowrap;
                outline: none;
                text-decoration: none;
                color: var(--control-primary-text-color);
                border-radius: inherit;
                fill: inherit;
                cursor: inherit;
                font-family: inherit;

                &:not(:focus):hover {
                    background: padding-box linear-gradient(var(--control-background-color-hover), var(--control-background-color-hover)), border-box linear-gradient(var(--control-primary-border-color-hover), var(--control-secondary-border-color-hover));
                    color: var(--control-secondary-text-color);
                }
            }

            &::before {
                width: calc(100% - var(--fluent-input-stroke-size) * 2);
                height: 100%;
                position: absolute;
                display: none;
                pointer-events: none !important;
                user-select: none !important;
                content: "";
                left: 0;
                right: 0;
                bottom: 0;
                margin: auto;
                border: var(--fluent-input-stroke-size) solid transparent;
                border-bottom-color: var(--accent-color);
                border-radius: var(--border-radius);
                -moz-animation: fluent-input-stroke-animation var(--transition-duration) var(--transition-key);
                -o-animation: fluent-input-stroke-animation var(--transition-duration) var(--transition-key);
                -webkit-animation: fluent-input-stroke-animation var(--transition-duration) var(--transition-key);
                animation: fluent-input-stroke-animation var(--transition-duration) var(--transition-key);
            }
        }
    }
}

:host(.focused) {
    > div[part=control] {
        > span[part=content] {
            &::before {
                display: block;
            }
        }
    }
}